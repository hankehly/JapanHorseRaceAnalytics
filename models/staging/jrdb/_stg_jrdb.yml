sources:
  - name: jrdb
    schema: jhra_raw
    tables:
      - name: raw_jrdb__cha
        description: 調教本追切データ仕様
      - name: raw_jrdb__cyb
        description: 調教分析データ仕様
      - name: raw_jrdb__hjc
        description: 払戻情報データ仕様
      - name: raw_jrdb__kab
        description: 開催データ仕様
      - name: raw_jrdb__ot
        description: 基準オッズ３連複データ仕様
      - name: raw_jrdb__ou
        description: 基準オッズ馬単データ仕様
      - name: raw_jrdb__ov
        description: 基準オッズ３連単データ仕様
      - name: raw_jrdb__ow
        description: 基準オッズワイドデータ仕様
      - name: raw_jrdb__oz
        description: 基準オッズデータ仕様
      - name: raw_jrdb__sed
        description: 成績データ仕様
      - name: raw_jrdb__skb
        description: 成績拡張データ仕様
      - name: raw_jrdb__tyb
        description: 直前情報データ仕様

models:
  - name: stg_jrdb__cha
    columns:
      - name: cha_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: cha_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 馬番
        quote: true
        tests:
          - not_null
      - name: 曜日
        quote: true
        tests:
          - not_null
      - name: 調教年月日
        quote: true
        tests:
          - not_null
      - name: 回数
        quote: true
        tests:
          - not_null
      - name: 調教コースコード # there's only 1 null value in the whole dataset..
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__training_course_codes')
              field: code
      - name: 追切種類
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3 ]
      - name: 追い状態
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__workout_status_codes')
              field: code
      - name: 乗り役
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4, 5 ]
      - name: 調教Ｆ
        quote: true
        tests:
          - not_null
      - name: 時計分析データ_テンＦ
        quote: true
      - name: 時計分析データ_中間Ｆ
        quote: true
      - name: 時計分析データ_終いＦ
        quote: true
      - name: 時計分析データ_テンＦ指数
        quote: true
      - name: 時計分析データ_中間Ｆ指数
        quote: true
      - name: 時計分析データ_終いＦ指数
        quote: true
      - name: 時計分析データ_追切指数
        quote: true
      - name: 併せ馬相手データ_併せ結果
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3 ]
      - name: 併せ馬相手データ_追切種類
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3 ]
      - name: 併せ馬相手データ_年齢
        quote: true
      - name: 併せ馬相手データ_クラス
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__race_condition_codes')
              field: code

  - name: stg_jrdb__cyb
    columns:
      - name: cyb_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: cyb_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 馬番
        quote: true
        tests:
          - not_null
      - name: 調教タイプ # ??
        quote: true
      - name: 調教コース種別 # ??
        quote: true
        tests:
          - not_null
          - accepted_values:
              values: [ 0, 1, 2, 3, 4, 5 ]
      - name: 調教コース種類_坂
        quote: true
        tests:
          - not_null
      - name: 調教コース種類_Ｗ
        quote: true
        tests:
          - not_null
      - name: 調教コース種類_ダ
        quote: true
        tests:
          - not_null
      - name: 調教コース種類_芝
        quote: true
        tests:
          - not_null
      - name: 調教コース種類_プ
        quote: true
        tests:
          - not_null
      - name: 調教コース種類_障
        quote: true
        tests:
          - not_null
      - name: 調教コース種類_ポ
        quote: true
        tests:
          - not_null
      - name: 調教距離
        quote: true
        tests:
          - not_null
          - accepted_values:
              values: [ 0, 1, 2, 3, 4 ]
      - name: 調教重点
        quote: true
        tests:
          - not_null
          - accepted_values:
              values: [ 0, 1, 2, 3, 4 ]
      - name: 追切指数
        quote: true
      - name: 仕上指数
        quote: true
      - name: 調教量評価
        quote: true
        description: A,B,C,Dに分類 (コード等の詳細説明は、【調教分析データ内容の説明】を参照してください。)
        tests:
          - accepted_values:
              values: [ "A", "B", "C", "D" ]
      - name: 仕上指数変化
        quote: true
        tests:
          - accepted_values:
              values: [ 0, 1, 2, 3, 4 ]
      - name: 調教コメント
        quote: true
      - name: コメント年月日
        quote: true
      - name: 調教評価
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3 ]
      - name: 一週前追切指数
        quote: true
      - name: 一週前追切コース
        quote: true
        description: 一週前追切の調教の追切コース (コード等の詳細説明は、【調教分析データ内容の説明】を参照してください。)
        tests:
          - relationships:
              to: ref('jrdb__training_course_codes')
              field: code
  - name: stg_jrdb__hjc
    columns:
      - name: hjc_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: hjc_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 単勝払戻
        quote: true
        tests:
          - not_null
      - name: 複勝払戻
        quote: true
        tests:
          - not_null
      - name: 枠連払戻
        quote: true
        tests:
          - not_null
      - name: 馬連払戻
        quote: true
        tests:
          - not_null
      - name: ワイド払戻
        quote: true
        tests:
          - not_null
      - name: 馬単払戻
        quote: true
        tests:
          - not_null
      - name: ３連複払戻
        quote: true
        tests:
          - not_null
      - name: ３連単払戻
        quote: true
        tests:
          - not_null

  - name: stg_jrdb__kab
    columns:
      - name: kab_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: kab_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: 開催キー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: 開催キー_年
        quote: true
        tests:
          - not_null
      - name: 開催キー_回
        quote: true
        tests:
          - not_null
      - name: 開催キー_日
        quote: true
        tests:
          - not_null
      - name: 年月日
        quote: true
        description: yyyyMMdd
        tests:
          - not_null
      - name: 開催区分
        quote: true
        description: 1:関東, 2:関西, 3:ローカル
        tests:
          - not_null
          - accepted_values:
              values: [ 1, 2, 3 ]
      - name: 曜日
        quote: true
        description: 日－土
        tests:
          - not_null
          - accepted_values:
              values: [ "月", "火", "水", "木", "金", "土", "日" ]
      - name: 場名
        quote: true
        description: 競馬場名
      - name: 天候コード
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__weather_codes')
              field: code
      - name: 芝馬場状態コード
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: 芝馬場状態内
        quote: true
        description: 1:絶好, 2:良, 3,稍荒, 4:荒
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: 芝馬場状態中
        quote: true
        description: 1:絶好, 2:良, 3,稍荒, 4:荒
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: 芝馬場状態外
        quote: true
        description: 1:絶好, 2:良, 3,稍荒, 4:荒
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: 芝馬場差
        quote: true
      - name: 直線馬場差最内
        quote: true
      - name: 直線馬場差内
        quote: true
      - name: 直線馬場差中
        quote: true
      - name: 直線馬場差外
        quote: true
      - name: 直線馬場差大外
        quote: true
      - name: ダ馬場状態コード
        quote: true
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: ダ馬場状態内
        quote: true
        description: 1:絶好, 2:良, 3,稍荒, 4:荒
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: ダ馬場状態中
        quote: true
        description: 1:絶好, 2:良, 3,稍荒, 4:荒
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: ダ馬場状態外
        quote: true
        description: 1:絶好, 2:良, 3,稍荒, 4:荒
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: ダ馬場差
        quote: true
      - name: データ区分
        quote: true
        description: 1:特別登録,2:想定確定,3:枠確定,4:前日
        tests:
          - accepted_values:
              values: [ 1, 2, 3, 4 ]
      - name: 連続何日目
        quote: true
        description: 日数
        tests:
          - not_null
      - name: 芝種類
        quote: true
        description: 1:野芝, 2:洋芝, 3:混生
        tests:
          - accepted_values:
              values: [ 1, 2, 3 ]
      - name: 草丈
        quote: true
        description: 単位cm
      - name: 転圧
        quote: true
        description: 1:転圧, 0:無し
      - name: 凍結防止剤
        quote: true
        description: 1:凍結防止剤散布, 0:無し
      - name: 中間降水量
        quote: true
        description: 単位mm

  - name: stg_jrdb__sed
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - レースキー_場コード
              - レースキー_年
              - レースキー_回
              - レースキー_日
              - レースキー_Ｒ
              - 馬番
            quote_columns: true
    columns:
      - name: sed_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 馬番
        quote: true
        tests:
          - not_null
      - name: 競走成績キー_血統登録番号
        quote: true
        description: 競走馬データとのリンクに使用
      - name: 競走成績キー_年月日
        quote: true
        description: 競走馬データとのリンクに使用 | yyyyMMdd <-暫定版より順序
      - name: 馬名
        quote: true
        description: 全角１８文字 <-入れ替え
      - name: レース条件_距離
        quote: true
      - name: レース条件_トラック情報_芝ダ障害コード
        quote: true
        tests:
          - not_null
          - accepted_values:
              values: [ 芝, ダート, 障害 ]
      - name: レース条件_トラック情報_右左
        quote: true
        description: 1:右, 2:左, 3:直, 9:他
      - name: レース条件_トラック情報_内外
        quote: true
        description: |
          1:通常(内), 2:外, 3,直ダ, 9:他,
          ※障害のトラックは、以下の２通りとなります。
          "393":障害直線ダート
          "391":障害直線芝
      - name: レース条件_馬場状態
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__going_codes')
              field: code
      - name: レース条件_種別
        quote: true
        description: ４歳以上等、→成績データの説明
      - name: レース条件_条件
        quote: true
        description: 900万下等、 →成績データの説明
      - name: レース条件_記号
        quote: true
        description: ○混等、 →成績データの説明
      - name: レース条件_重量
        quote: true
        description: ハンデ等、 →成績データの説明
      - name: レース条件_グレード
        quote: true
      - name: レース条件_レース名
        quote: true
        description: レース名の通称（全角２５文字）
      - name: レース条件_頭数
        quote: true
      - name: レース条件_レース名略称
        quote: true
        description: 全角４文字
      - name: 馬成績_着順
        quote: true
      - name: 馬成績_異常区分
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__anomaly_codes')
              field: code
      - name: 馬成績_タイム
        quote: true
        description: 1byte_length:分, 2-4byte_length:秒(0.1秒単位)
        tests:
          - not_null
      - name: 馬成績_斤量
        quote: true
        description: 0.1Kg単位
      - name: 馬成績_騎手名
        quote: true
        description: 全角６文字
      - name: 馬成績_調教師名
        quote: true
        description: 全角６文字
      - name: 馬成績_確定単勝オッズ
        quote: true
      - name: 馬成績_確定単勝人気順位
        quote: true
      - name: ＪＲＤＢデータ_ＩＤＭ
        quote: true
      - name: ＪＲＤＢデータ_素点
        quote: true
      - name: ＪＲＤＢデータ_馬場差
        quote: true
      - name: ＪＲＤＢデータ_ペース
        quote: true
      - name: ＪＲＤＢデータ_出遅
        quote: true
      - name: ＪＲＤＢデータ_位置取
        quote: true
      - name: ＪＲＤＢデータ_不利
        quote: true
      - name: ＪＲＤＢデータ_前不利
        quote: true
        description: 前３Ｆ内での不利
      - name: ＪＲＤＢデータ_中不利
        quote: true
        description: 道中での不利
      - name: ＪＲＤＢデータ_後不利
        quote: true
        description: 後３Ｆ内での不利
      - name: ＪＲＤＢデータ_レース
        quote: true
      - name: ＪＲＤＢデータ_コース取り
        quote: true
        description: 1:最内,2:内,3:中,4:外,5:大外
      - name: ＪＲＤＢデータ_上昇度コード
        quote: true
        description: 1:AA, 2:A, 3:B, 4:C, 5:?
      - name: ＪＲＤＢデータ_クラスコード
        quote: true
      - name: ＪＲＤＢデータ_馬体コード
        quote: true
      - name: ＪＲＤＢデータ_気配コード
        quote: true
      - name: ＪＲＤＢデータ_レースペース
        quote: true
        description: H:ハイ, M:平均, S:スロー
      - name: ＪＲＤＢデータ_馬ペース
        quote: true
        description: 馬自身のペース(H:M:S)
      - name: ＪＲＤＢデータ_テン指数
        quote: true
        description: 前３Ｆタイムを指数化したもの
      - name: ＪＲＤＢデータ_上がり指数
        quote: true
        description: 後３Ｆタイムを指数化したもの
      - name: ＪＲＤＢデータ_ペース指数
        quote: true
        description: 馬のペースを指数化したもの
      - name: ＪＲＤＢデータ_レースＰ指数
        quote: true
        description: レースのペースを指数化したもの
      - name: ＪＲＤＢデータ_1(2)着馬名
        quote: true
        description: 全角６文字
      - name: ＪＲＤＢデータ_1(2)着タイム差
        quote: true
        description: 0.1秒単位
      - name: ＪＲＤＢデータ_前３Ｆタイム
        quote: true
        description: 0.1秒単位
      - name: ＪＲＤＢデータ_後３Ｆタイム
        quote: true
        description: 0.1秒単位
      - name: ＪＲＤＢデータ_備考
        quote: true
        description: 全角１２文字（地方競馬場名等）
      - name: 確定複勝オッズ下
        quote: true
        description: 最終的な複勝オッズ（下限）
      - name: 10時単勝オッズ
        quote: true
        description: 10時頃の単勝オッズ
      - name: 10時複勝オッズ
        quote: true
        description: 10時頃の複勝オッズ
      - name: コーナー順位１
        quote: true
      - name: コーナー順位２
        quote: true
      - name: コーナー順位３
        quote: true
      - name: コーナー順位４
        quote: true
      - name: 前３Ｆ先頭差
        quote: true
        description: 前３Ｆ地点での先頭とのタイム差 (0.1秒単位)
      - name: 後３Ｆ先頭差
        quote: true
        description: 後３Ｆ地点での先頭とのタイム差 (0.1秒単位)
      - name: 騎手コード
        quote: true
        description: 騎手マスタとリンク
        tests:
          - not_null
      - name: 調教師コード
        quote: true
        description: 調教師マスタとリンク
        tests:
          - not_null
      - name: 馬体重
        quote: true
        description: データ無:スペース
      - name: 馬体重増減
        quote: true
        description: |
          符号+数字２桁、データ無:スペース
          ※このカラムはNULL値があったり自分で計算する方が正確です
      - name: 天候コード
        quote: true
        description: コード表参照
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__weather_codes')
              field: code
      - name: コース
        quote: true
        description: 1:A,2:A1,3:A2,4:B,5:C,6:D
      - name: レース脚質
        quote: true
        description: 脚質コード参照
        tests:
          - relationships:
              to: ref('jrdb__run_style_codes')
              field: code
      - name: 払戻データ_単勝
        quote: true
        description: 単位（円）
      - name: 払戻データ_複勝
        quote: true
        description: |
          単位（円）
          この値はHJCと完全一致する
      - name: 本賞金
        quote: true
        description: 単位（万円）
      - name: 収得賞金
        quote: true
        description: |
          単位（万円）
          https://dic.nicovideo.jp/a/%E5%8F%8E%E5%BE%97%E8%B3%9E%E9%87%91
      - name: レースペース流れ
        quote: true
        description: →成績データの説明
      - name: 馬ペース流れ
        quote: true
        description: →成績データの説明
      - name: ４角コース取り
        quote: true
        description: 1:最内,2:内,3:中,4:外,5:大外
      - name: 発走時間
        quote: true
        description: HHMM

  - name: stg_jrdb__tyb
    columns:
      - name: tyb_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: tyb_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 馬番
        quote: true
        tests:
          - not_null
      - name: ＩＤＭ
        quote: true
        tests:
          - not_null
      - name: 騎手指数
        quote: true
        tests:
          - not_null
      - name: 情報指数
        quote: true
        tests:
          - not_null
      - name: オッズ指数
        quote: true
        tests:
          - not_null
      - name: パドック指数
        quote: true
        tests:
          - not_null
      - name: 予備１
        quote: true
      - name: 総合指数
        quote: true
        tests:
          - not_null
      - name: 馬具変更情報
        quote: true
        description: |
          0:馬具変更なし
          1:馬具変更（通常）
          2:馬具変更（特注）特に効果があると思われる馬具変更。
        tests:
          - not_null
          - accepted_values:
              values: [ 0, 1, 2 ]
      - name: 脚元情報
        quote: true
        description: |
          0:平行線
          1:良化（!）
          2:疑問（?）
          3:悪化（X）
        tests:
          - not_null
          - accepted_values:
              values: [ 0, 1, 2, 3 ]
      - name: 取消フラグ
        quote: true
        description: 取消フラグ
        tests:
          - not_null

      # todo: link with 騎手 master
      - name: 騎手コード
        quote: true
        tests:
          - not_null

      - name: 騎手名
        quote: true
        tests:
          - not_null
      - name: 負担重量
        quote: true
        description: 0.1Kg単位
        tests:
          - not_null
      - name: 見習い区分
        quote: true
        description: 1:☆(1K減),2:△(2K減),3:▲(3K減)
        tests:
          - not_null
          - accepted_values:
              values: [ 0, 1, 2, 3 ]
      - name: 馬場状態コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__going_codes')
              field: code
      - name: 天候コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__weather_codes')
              field: code

      # there are only 14 rows of null records (from 1999)
      - name: 単勝オッズ
        quote: true
        description: 単勝オッズ（データ作成時点）
      - name: 複勝オッズ
        quote: true
        description: 複勝オッズの下側
      - name: オッズ取得時間
        quote: true
        description: HHMM
      - name: 馬体重
        quote: true
      - name: 馬体重増減
        quote: true
        description: 符号+数字２桁、データ無:スペース
      - name: オッズ印
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__symbol_codes')
              field: code
      - name: パドック印
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__symbol_codes')
              field: code
      - name: 直前総合印
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__symbol_codes')
              field: code
      - name: 馬体コード
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__horse_form_codes')
              field: code
      - name: 気配コード
        quote: true
        tests:
          - relationships:
              to: ref('jrdb__demeanor_codes')
              field: code

      # todo: handle invalid times like 9:90
      - name: 発走時間
        quote: true
        description: HHMM

  - name: stg_jrdb__oz
    description: 基準オッズデータ
    columns:
      - name: oz_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: oz_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 登録頭数
        quote: true
        tests:
          - not_null
      - name: 単勝オッズ
        quote: true
        tests:
          - not_null
      - name: 複勝オッズ
        quote: true
        tests:
          - not_null
      - name: 連勝オッズ
        quote: true
        tests:
          - not_null

  - name: stg_jrdb__ow
    description: 基準オッズワイドデータ
    columns:
      - name: ow_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: ow_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 登録頭数
        quote: true
        tests:
          - not_null
      - name: ワイドオッズ
        quote: true
        tests:
          - not_null

  - name: stg_jrdb__skb
    columns:
      - name: skb_sk
        quote: true
        tests:
          - unique
          - not_null
      - name: skb_bk
        quote: true
        tests:
          - unique
          - not_null
      - name: レースキー
        quote: true
        tests:
          - not_null
      - name: 開催キー
        quote: true
        tests:
          - not_null
      - name: レースキー_場コード
        quote: true
        tests:
          - not_null
          - relationships:
              to: ref('jrdb__racetrack_codes')
              field: code
      - name: レースキー_年
        quote: true
        tests:
          - not_null
      - name: レースキー_回
        quote: true
        tests:
          - not_null
      - name: レースキー_日
        quote: true
        tests:
          - not_null
      - name: レースキー_Ｒ
        quote: true
        tests:
          - not_null
      - name: 馬番
        quote: true
        tests:
          - not_null
      - name: 競走成績キー_血統登録番号
        quote: true
      - name: 競走成績キー_年月日
        quote: true
      - name: 特記コード
        quote: true
      - name: 馬具コード
        quote: true
      - name: 脚元コード_総合
        quote: true
      - name: 脚元コード_左前
        quote: true
      - name: 脚元コード_右前
        quote: true
      - name: 脚元コード_左後
        quote: true
      - name: 脚元コード_右後
        quote: true
      - name: パドックコメント
        quote: true
      - name: 脚元コメント
        quote: true
      - name: 馬具(その他)コメント
        quote: true
      - name: レースコメント
        quote: true
      - name: 分析用データ_ハミ
        quote: true
      - name: 分析用データ_バンテージ
        quote: true
      - name: 分析用データ_蹄鉄
        quote: true
      - name: 分析用データ_蹄状態
        quote: true
      - name: 分析用データ_ソエ
        quote: true
      - name: 分析用データ_骨瘤
        quote: true
